<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" href="/favicon.jpg" type="image/jpeg" sizes="120x120">
  <title>Study Planner ‚Äî Pianificazione intelligente per studenti</title>

  <style>
    /* ===== Base theme (coerente col tuo styles.css) ===== */
    :root{
      --bg0:#070a12;
      --bg1:#0b0f1a;

      --text: rgba(255,255,255,.93);
      --muted: rgba(255,255,255,.66);

      --border: rgba(255,255,255,.12);
      --border2: rgba(255,255,255,.18);

      --panel: rgba(255,255,255,.07);
      --shadow: 0 18px 60px rgba(0,0,0,.50);

      --r: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(99,102,241,.16), transparent 58%),
        radial-gradient(900px 600px at 80% 15%, rgba(34,197,94,.08), transparent 58%),
        radial-gradient(900px 700px at 50% 95%, rgba(245,158,11,.06), transparent 62%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
    }

    a{ color:inherit; text-decoration:none; }
    h1,h2,h3,p{ margin:0; }
    .hidden{ display:none !important; }

    /* ===== Layout ===== */
    .container{
      max-width: 560px;
      margin: 0 auto;
      padding: 28px 16px 56px;
    }

    .header{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-bottom: 14px;
    }

    .header h1{
      font-size: 30px;
      letter-spacing:-.02em;
    }

    .muted{
      color: var(--muted);
      font-size: 13px;
      line-height: 1.35;
    }

    /* ===== Card ===== */
    .card{
      position: relative;
      isolation: isolate;
      overflow: hidden;

      border: 1px solid var(--border);
      border-radius: var(--r);
      background: var(--panel);
      box-shadow: var(--shadow);
      padding: 14px;

      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .card::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.10));
      pointer-events:none;
      z-index:0;
    }
    .card > *{ position:relative; z-index:1; }

    /* ===== Tabs ===== */
    .tabs{ display:flex; gap:8px; margin-bottom:10px; }
    .tab{
      flex:1;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      cursor:pointer;
      font: inherit;
    }
    .tab.active{
      background: rgba(255,255,255,.12);
      color: var(--text);
    }

    /* ===== Forms ===== */
    .form{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top: 12px;
    }

    label{ font-size:12px; color: var(--muted); }

    input,select{
      width:100%;
      padding:12px 12px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      color: var(--text);
      outline:none;
      color-scheme: dark;
      -webkit-text-fill-color: rgba(255,255,255,.92);
    }
    input:focus,select:focus{
      border-color: rgba(255,255,255,.22);
      box-shadow: 0 0 0 4px rgba(255,255,255,.08);
    }

    .error{
      min-height:18px;
      color: rgba(251,113,133,.95);
      font-size:12px;
      margin: 0;
    }

    /* ===== Buttons ===== */
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;

      padding:10px 12px;
      border-radius: 12px;

      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      color: var(--text);

      cursor:pointer;
      user-select:none;
      transition: transform .05s ease, filter .15s ease, background .15s ease;
      font: inherit;
    }
    .btn:hover{ filter: brightness(1.08); }
    .btn:active{ transform: translateY(1px); }

    .btn.primary{
      background: rgba(255,255,255,.92);
      color:#0b0f1a;
      border-color: transparent;
      font-weight: 900;
    }

    /* ===== Password toggle ===== */
    .pwWrap{
      position: relative;
      display:flex;
      align-items:center;
    }
    .pwWrap input{ padding-right: 44px; }

    .pwToggle{
      position:absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);

      width: 34px;
      height: 34px;
      border-radius: 12px;

      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.78);

      cursor:pointer;
      display:grid;
      place-items:center;

      transition: filter .15s ease, transform .05s ease, background .15s ease;
    }
    .pwToggle:hover{ filter: brightness(1.08); }
    .pwToggle:active{ transform: translateY(-50%) translateY(1px); }

    /* ===== Toast (coerente col tuo stile) ===== */
    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      z-index: 9999;
      width: min(560px, calc(100% - 24px));
    }
    .toast.hidden { display: none; }
    .toastInner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(17, 24, 39, 0.92);
      color: #fff;
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.12);
    }
    .toastMsg {
      font-size: 14px;
      line-height: 1.25;
    }
    .toastClose {
      border: 0;
      background: rgba(255,255,255,0.12);
      color: #fff;
      width: 32px;
      height: 32px;
      border-radius: 10px;
      cursor: pointer;
    }
    .toastClose:hover { background: rgba(255,255,255,0.18); }

    /* ===== Landing Page Styles ===== */
    .landingHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:40px;
      flex-wrap:wrap;
    }

    .landingTitle{
      flex:1;
      min-width:0;
    }

    .landingTitle h1{
      font-size:36px;
      letter-spacing:-.03em;
      margin-bottom:8px;
      background: linear-gradient(135deg, rgba(255,255,255,.98), rgba(255,255,255,.75));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .landingTitle .tagline{
      font-size:16px;
      color: var(--muted);
      line-height:1.4;
    }

    .landingLoginBtn{
      padding:12px 20px;
      font-weight:900;
      white-space:nowrap;
    }

    .heroSection{
      text-align:center;
      padding:48px 20px;
      margin-bottom:48px;
    }

    .heroTitle{
      font-size:42px;
      font-weight:950;
      letter-spacing:-.03em;
      margin-bottom:16px;
      line-height:1.2;
    }

    .heroSubtitle{
      font-size:18px;
      color: var(--muted);
      line-height:1.6;
      max-width:680px;
      margin:0 auto 32px;
    }

    .featuresGrid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap:20px;
      margin-bottom:48px;
    }

    .featureCard{
      background: var(--panel);
      border:1px solid var(--border);
      border-radius: var(--r);
      padding:24px;
      box-shadow: var(--shadow);
    }

    .featureIcon{
      font-size:32px;
      margin-bottom:12px;
      display:block;
    }

    .featureTitle{
      font-size:18px;
      font-weight:950;
      margin-bottom:8px;
      color: rgba(255,255,255,.96);
    }

    .featureDesc{
      font-size:14px;
      color: var(--muted);
      line-height:1.6;
    }

    .testimonialsSection{
      margin-bottom:48px;
    }

    .sectionTitle{
      font-size:28px;
      font-weight:950;
      text-align:center;
      margin-bottom:32px;
      letter-spacing:-.02em;
    }

    .testimonialsGrid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap:20px;
    }

    .testimonialCard{
      background: var(--panel);
      border:1px solid var(--border);
      border-radius: var(--r);
      padding:24px;
      box-shadow: var(--shadow);
    }

    .testimonialText{
      font-size:15px;
      line-height:1.7;
      color: rgba(255,255,255,.88);
      margin-bottom:16px;
      font-style:italic;
    }

    .testimonialAuthor{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .testimonialAvatar{
      width:40px;
      height:40px;
      border-radius:50%;
      background: linear-gradient(135deg, rgba(99,102,241,.6), rgba(34,197,94,.6));
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      font-size:16px;
      color: rgba(255,255,255,.95);
    }

    .testimonialInfo{
      flex:1;
    }

    .testimonialName{
      font-weight:900;
      font-size:14px;
      color: rgba(255,255,255,.96);
      margin-bottom:2px;
    }

    .testimonialRole{
      font-size:12px;
      color: var(--muted);
    }

    .ctaSection{
      text-align:center;
      padding:48px 20px;
      background: var(--panel);
      border:1px solid var(--border);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      margin-bottom:48px;
    }

    .ctaTitle{
      font-size:32px;
      font-weight:950;
      margin-bottom:12px;
      letter-spacing:-.02em;
    }

    .ctaSubtitle{
      font-size:16px;
      color: var(--muted);
      margin-bottom:24px;
    }

    .ctaButton{
      padding:16px 32px;
      font-size:16px;
      font-weight:900;
    }

    .loginModal{
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,.75);
      z-index:10000;
      padding:20px;
    }

    .loginModal.active{
      display:flex;
    }

    .loginModalContent{
      background: var(--bg1);
      border:1px solid var(--border);
      border-radius: var(--r);
      box-shadow: 0 24px 80px rgba(0,0,0,.6);
      width:100%;
      max-width:480px;
      padding:28px;
      position:relative;
      max-height:90vh;
      overflow-y:auto;
    }

    .loginModalClose{
      position:absolute;
      top:16px;
      right:16px;
      width:32px;
      height:32px;
      border-radius:10px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.05);
      color: var(--text);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
      transition:all .15s ease;
    }

    .loginModalClose:hover{
      background:rgba(255,255,255,.1);
    }

    @media (max-width: 720px){
      .landingTitle h1{ font-size:28px; }
      .heroTitle{ font-size:32px; }
      .heroSubtitle{ font-size:16px; }
      .featuresGrid{ grid-template-columns:1fr; }
      .testimonialsGrid{ grid-template-columns:1fr; }
    }
  </style>
</head>

<body>
  <!-- Login Modal -->
  <div id="login-modal" class="loginModal">
    <div class="loginModalContent">
      <button class="loginModalClose" id="modal-close" aria-label="Chiudi">‚úï</button>
      <div class="header" style="margin-bottom:20px;">
        <h1 style="font-size:28px;margin-bottom:8px;">Study Planner</h1>
        <p class="muted">Accedi o crea un account</p>
      </div>

      <div class="tabs">
        <button class="tab active" id="tab-login" type="button">Login</button>
        <button class="tab" id="tab-signup" type="button">Crea account</button>
      </div>

      <form id="login-form" class="form">
        <label>Email</label>
        <input type="email" id="login-email" required placeholder="nome@uni.it" autocomplete="email" />

        <label>Password</label>
        <div class="pwWrap">
          <input type="password" id="login-pass" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
          <button type="button" class="pwToggle" aria-label="Mostra password" title="Mostra/Nascondi">‚å£</button>
        </div>

        <button type="submit" class="btn primary" id="login-submit">Entra</button>
        <p class="error" id="login-error"></p>
      </form>

      <form id="signup-form" class="form hidden">
        <label>Email</label>
        <input type="email" id="signup-email" required placeholder="nome@uni.it" autocomplete="email" />

        <label>Password</label>
        <div class="pwWrap">
          <input type="password" id="signup-pass" required placeholder="min 6 caratteri" autocomplete="new-password" />
          <button type="button" class="pwToggle" aria-label="Mostra password" title="Mostra/Nascondi">‚å£</button>
        </div>

        <button type="submit" class="btn primary" id="signup-submit">Crea account</button>
        <p class="error" id="signup-error"></p>
      </form>
    </div>
  </div>

  <div class="container" style="max-width:1200px;">
    <!-- Header con login button -->
    <header class="landingHeader">
      <div class="landingTitle">
        <h1>Study Planner</h1>
        <p class="tagline">Pianificazione intelligente per studenti universitari</p>
      </div>
      <button class="btn primary landingLoginBtn" id="open-login">Accedi</button>
    </header>

    <!-- Hero Section -->
    <section class="heroSection">
      <h2 class="heroTitle">Organizza il tuo studio con un algoritmo intelligente</h2>
      <p class="heroSubtitle">
        Study Planner crea automaticamente un piano di studio settimanale personalizzato, 
        distribuendo i task in base alle tue priorit√†, disponibilit√† e obiettivi. 
        Studia in modo pi√π efficace e raggiungi i tuoi traguardi.
      </p>
      <button class="btn primary ctaButton" id="cta-login">Inizia gratis</button>
    </section>

    <!-- Features -->
    <section>
      <h2 class="sectionTitle">Perch√© Study Planner?</h2>
      <div class="featuresGrid">
        <div class="featureCard">
          <span class="featureIcon">üß†</span>
          <h3 class="featureTitle">Algoritmo Intelligente</h3>
          <p class="featureDesc">
            Il nostro sistema analizza urgenza, difficolt√† e livello di preparazione 
            per creare un piano ottimizzato che si adatta alle tue esigenze.
          </p>
        </div>
        <div class="featureCard">
          <span class="featureIcon">‚è∞</span>
          <h3 class="featureTitle">Pianificazione Realistica</h3>
          <p class="featureDesc">
            Rispetta la tua disponibilit√† settimanale e distribuisce i task tra mattina 
            e pomeriggio per massimizzare la produttivit√†.
          </p>
        </div>
        <div class="featureCard">
          <span class="featureIcon">üìä</span>
          <h3 class="featureTitle">Tracking del Progresso</h3>
          <p class="featureDesc">
            Monitora il completamento delle task, visualizza statistiche di readiness 
            e mantieni il controllo sul tuo percorso di studio.
          </p>
        </div>
        <div class="featureCard">
          <span class="featureIcon">üéØ</span>
          <h3 class="featureTitle">Obiettivi Personalizzati</h3>
          <p class="featureDesc">
            Scegli tra "Sufficiente", "Buono" o "Ottimo" e il sistema adatter√† 
            l'intensit√† e il tipo di task al tuo obiettivo.
          </p>
        </div>
        <div class="featureCard">
          <span class="featureIcon">üîÑ</span>
          <h3 class="featureTitle">Flessibilit√† Totale</h3>
          <p class="featureDesc">
            Aggiungi task manuali, modifica esami, rigenera il piano quando serve. 
            Il controllo √® sempre nelle tue mani.
          </p>
        </div>
        <div class="featureCard">
          <span class="featureIcon">üì±</span>
          <h3 class="featureTitle">Timer Integrato</h3>
          <p class="featureDesc">
            Ogni task ha un timer dedicato per tracciare il tempo effettivo di studio 
            e mantenere la concentrazione con la tecnica Pomodoro.
          </p>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonialsSection">
      <h2 class="sectionTitle">Cosa dicono gli studenti</h2>
      <div class="testimonialsGrid">
        <div class="testimonialCard">
          <p class="testimonialText">
            "Finalmente un'app che capisce davvero le mie esigenze. Il piano settimanale 
            √® sempre realistico e mi aiuta a non procrastinare. Ho migliorato i miei voti 
            del 15% in un semestre!"
          </p>
          <div class="testimonialAuthor">
            <div class="testimonialAvatar">M</div>
            <div class="testimonialInfo">
              <div class="testimonialName">Marco R.</div>
              <div class="testimonialRole">Studente Ingegneria</div>
            </div>
          </div>
        </div>
        <div class="testimonialCard">
          <p class="testimonialText">
            "L'algoritmo √® geniale. Distribuisce automaticamente lo studio in modo bilanciato 
            e mi ricorda quando √® il momento di ripassare. Non potrei pi√π farne a meno."
          </p>
          <div class="testimonialAuthor">
            <div class="testimonialAvatar">S</div>
            <div class="testimonialInfo">
              <div class="testimonialName">Sara L.</div>
              <div class="testimonialRole">Studente Medicina</div>
            </div>
          </div>
        </div>
        <div class="testimonialCard">
          <p class="testimonialText">
            "Prima studiavo a caso, ora ho un metodo. Il tracking del progresso mi motiva 
            e vedere la percentuale di readiness mi fa capire se sono in ritardo o in anticipo."
          </p>
          <div class="testimonialAuthor">
            <div class="testimonialAvatar">L</div>
            <div class="testimonialInfo">
              <div class="testimonialName">Luca F.</div>
              <div class="testimonialRole">Studente Economia</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Finale -->
    <section class="ctaSection">
      <h2 class="ctaTitle">Pronto a migliorare il tuo metodo di studio?</h2>
      <p class="ctaSubtitle">Crea un account gratuito e inizia subito a pianificare</p>
      <button class="btn primary ctaButton" id="cta-login-2">Inizia ora</button>
    </section>
  </div>

  <main class="card" style="display:none;">
      <div class="tabs">
        <button class="tab active" id="tab-login" type="button">Login</button>
        <button class="tab" id="tab-signup" type="button">Crea account</button>
      </div>

      <form id="login-form" class="form">
        <label>Email</label>
        <input type="email" id="login-email" required placeholder="nome@uni.it" autocomplete="email" />

        <label>Password</label>
        <div class="pwWrap">
          <input type="password" id="login-pass" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
          <button type="button" class="pwToggle" aria-label="Mostra password" title="Mostra/Nascondi">‚å£</button>
        </div>

        <button type="submit" class="btn primary" id="login-submit">Entra</button>
        <p class="error" id="login-error"></p>
      </form>

      <form id="signup-form" class="form hidden">
        <label>Email</label>
        <input type="email" id="signup-email" required placeholder="nome@uni.it" autocomplete="email" />

        <label>Password</label>
        <div class="pwWrap">
          <input type="password" id="signup-pass" required placeholder="min 6 caratteri" autocomplete="new-password" />
          <button type="button" class="pwToggle" aria-label="Mostra password" title="Mostra/Nascondi">‚å£</button>
        </div>

        <button type="submit" class="btn primary" id="signup-submit">Crea account</button>
        <p class="error" id="signup-error"></p>
      </form>
    </main>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden" role="status" aria-live="polite">
    <div class="toastInner">
      <div id="toast-msg" class="toastMsg">‚Äî</div>
      <button id="toast-close" class="toastClose" type="button" aria-label="Chiudi">‚úï</button>
    </div>
  </div>

  <script type="module">
    // ========= UI helpers =========
    const $ = (id) => document.getElementById(id);

    // Login Modal
    const loginModal = $("login-modal");
    const openLoginBtn = $("open-login");
    const ctaLoginBtns = document.querySelectorAll("#cta-login, #cta-login-2");
    const modalClose = $("modal-close");

    function openLoginModal(){
      loginModal.classList.add("active");
      document.body.style.overflow = "hidden";
    }

    function closeLoginModal(){
      loginModal.classList.remove("active");
      document.body.style.overflow = "";
      // Reset form errors
      $("login-error").textContent = "";
      $("signup-error").textContent = "";
    }

    openLoginBtn?.addEventListener("click", openLoginModal);
    ctaLoginBtns.forEach(btn => btn?.addEventListener("click", openLoginModal));
    modalClose?.addEventListener("click", closeLoginModal);
    loginModal?.addEventListener("click", (e) => {
      if (e.target === loginModal) closeLoginModal();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && loginModal.classList.contains("active")) {
        closeLoginModal();
      }
    });

    // Tabs
    const tabLogin = $("tab-login");
    const tabSignup = $("tab-signup");
    const loginForm = $("login-form");
    const signupForm = $("signup-form");

    function setTab(which){
      const isLogin = which === "login";
      tabLogin.classList.toggle("active", isLogin);
      tabSignup.classList.toggle("active", !isLogin);
      loginForm.classList.toggle("hidden", !isLogin);
      signupForm.classList.toggle("hidden", isLogin);

      // pulizia errori
      $("login-error").textContent = "";
      $("signup-error").textContent = "";
    }

    tabLogin?.addEventListener("click", () => setTab("login"));
    tabSignup?.addEventListener("click", () => setTab("signup"));

    // Password visibility toggles
    document.querySelectorAll(".pwToggle").forEach((btn) => {
      btn.addEventListener("click", () => {
        const input = btn.parentElement.querySelector("input");
        const show = input.type === "password";
        input.type = show ? "text" : "password";
        btn.textContent = show ? "‚å£" : "ìÅπ";
        btn.setAttribute("aria-label", show ? "Nascondi password" : "Mostra password");
      });
    });

    // Close modal on successful login (will be handled by app.js)
    window.addEventListener("login-success", () => {
      closeLoginModal();
    });

    // Toast
    const toast = $("toast");
    const toastMsg = $("toast-msg");
    const toastClose = $("toast-close");
    let toastTimer = null;

    function showToast(msg, ms=2600){
      toastMsg.textContent = msg;
      toast.classList.remove("hidden");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toast.classList.add("hidden"), ms);
    }
    toastClose.addEventListener("click", () => toast.classList.add("hidden"));

    // ========= Auth integration =========
    // Qui importi il tuo app.js esistente (firebase/auth). Mantieni la logica l√¨.
    // In questo index.html gestiamo solo UI (tabs, eye toggle, toast).
    import "./app.js";

    // Opzionale: se nel tuo app.js lanci eventi custom, puoi ascoltarli qui.
    // Esempio: window.dispatchEvent(new CustomEvent("toast", { detail: "Email inviata" }))
    window.addEventListener("toast", (e) => showToast(String(e.detail || "‚Äî")));

    // Debug UX: evita doppio submit in caso di Enter ripetuti
    $("login-form").addEventListener("submit", () => showToast("Accesso in corso‚Ä¶", 1600));
    $("signup-form").addEventListener("submit", () => showToast("Creazione account‚Ä¶", 1600));
  </script>
</body>
</html>
